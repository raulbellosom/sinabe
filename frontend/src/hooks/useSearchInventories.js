import { useQuery } from '@tanstack/react-query';
import { searchInventories } from '../services/searchInventories.api';

export const useSearchInventories = ({
  searchTerm,
  deadlineId,
  projectId,
  purchaseOrderId,
  invoiceId,
  verticalId,
  locationName,
  modelName,
  brandName,
  typeName,
  sortBy,
  order,
  page,
  pageSize,
  conditionName,
  deepSearch,
  status,
  advancedSearch = 'true',
  ids, // IDs especÃ­ficos para filtrar (usado por notificaciones)
  signal,
}) => {
  return useQuery({
    queryKey: [
      'search-inventories',
      searchTerm,
      deadlineId,
      projectId,
      purchaseOrderId,
      invoiceId,
      verticalId,
      locationName,
      modelName,
      brandName,
      typeName,
      sortBy,
      order,
      page,
      pageSize,
      conditionName,
      deepSearch,
      status,
      advancedSearch,
      ids,
    ],
    queryFn: () =>
      searchInventories({
        searchTerm,
        deadlineId,
        projectId,
        purchaseOrderId,
        invoiceId,
        verticalId,
        locationName,
        modelName,
        brandName,
        typeName,
        sortBy,
        order,
        page,
        pageSize,
        conditionName,
        deepSearch,
        status,
        advancedSearch,
        ids,
        signal,
      }),
    enabled: true,
    keepPreviousData: true,
    refetchOnWindowFocus: false,
  });
};
